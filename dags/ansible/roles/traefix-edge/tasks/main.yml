- name: Install Docker
  apt:
    name: docker.io
    update_cache: yes

- name: Enable Docker
  systemd:
    name: docker
    state: started
    enabled: yes

- name: Run Traefik edge proxy
  shell: |
    docker rm -f traefik-edge || true
    docker run -d \
      --name traefik-edge \
      --restart unless-stopped \
      -p 80:80 \
      -p 443:443 \
      traefik:v2.11
